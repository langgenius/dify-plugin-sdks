identity:
  name: callback_query_received
  author: langgenius
  label:
    en_US: Callback Query Received
    zh_Hans: 收到回调查询
    ja_JP: コールバッククエリ受信

description:
  en_US: Triggers when a user presses an inline keyboard button that sends callback data.
  zh_Hans: 当用户按下发送回调数据的行内键盘按钮时触发。
  ja_JP: ユーザーがコールバックデータを送信するインラインボタンを押したときにトリガーします。

parameters: []

output_schema:
  type: object
  additionalProperties: false
  required:
    - update_id
    - callback_query
  properties:
    update_id:
      type: integer
      description: Unique identifier for the Telegram update.
    callback_query:
      type: object
      additionalProperties: false
      description: Callback query payload.
      required:
        - id
        - from
        - chat_instance
      properties:
        id:
          type: string
          description: Unique identifier for this query.
        from:
          $ref: "#/$defs/User"
        message:
          $ref: "#/$defs/Message"
        inline_message_id:
          type: string
          description: Identifier of the inline message if the query originates from inline mode.
        chat_instance:
          type: string
          description: Global identifier, uniquely corresponding to the chat to which the message with the callback button was sent.
        data:
          type: string
          description: Data associated with the callback button press.
        game_short_name:
          type: string
          description: Short name of a Game to be returned if the button is a game button.

$defs:
  User:
    type: object
    description: Telegram User object.
    additionalProperties: true
    properties:
      id:
        type: integer
        description: Unique identifier for this user or bot.
      is_bot:
        type: boolean
        description: True if this user is a bot.
      first_name:
        type: string
        description: User first name.
      last_name:
        type: string
        description: User last name.
      username:
        type: string
        description: Username of the user, if any.
      language_code:
        type: string
        description: IETF language tag of the user's language.
      is_premium:
        type: boolean
        description: True if the user is a Telegram Premium subscriber.

  Chat:
    type: object
    description: Telegram Chat object.
    additionalProperties: true
    properties:
      id:
        type: integer
        description: Unique identifier for this chat.
      type:
        type: string
        description: Type of chat, such as private, group, supergroup, or channel.
      title:
        type: string
        description: Chat title for supergroups, channels, and group chats.
      username:
        type: string
        description: Username of the chat if available.
      first_name:
        type: string
        description: First name of the other party in a private chat.
      last_name:
        type: string
        description: Last name of the other party in a private chat.

  Message:
    type: object
    description: Telegram Message object associated with the callback query.
    additionalProperties: true
    properties:
      message_id:
        type: integer
        description: Unique message identifier inside this chat.
      chat:
        $ref: "#/$defs/Chat"
      date:
        type: integer
        description: Date the message was sent in Unix time.
      text:
        type: string
        description: Message text, if any.
      caption:
        type: string
        description: Caption for media messages, if any.
      from:
        $ref: "#/$defs/User"
      reply_markup:
        type: object
        description: Inline keyboard attached to the message.

extra:
  python:
    source: events/callbacks/callback_query_received.py
