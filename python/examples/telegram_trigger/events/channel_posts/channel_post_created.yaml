identity:
  name: channel_post_created
  author: langgenius
  label:
    en_US: Message Received
    zh_Hans: 收到消息
    ja_JP: メッセージ受信

description:
  en_US: Triggers when a new channel post is published.
  zh_Hans: 当频道发布新帖子时触发。
  ja_JP: 新しいチャンネル投稿が公開されたときにトリガーします。

parameters: []

output_schema:
  type: object
  additionalProperties: false
  required:
    - update_id
    - message
  properties:
    update_id:
      type: integer
      description: Unique identifier for the Telegram update.
    message:
      $ref: "#/$defs/Message"

$defs:
  User:
    type: object
    description: Telegram User object as defined in the Bot API.
    additionalProperties: true
    properties:
      id:
        type: integer
        description: Unique identifier for this user or bot.
      is_bot:
        type: boolean
        description: True if this user is a bot.
      first_name:
        type: string
        description: User first name.
      last_name:
        type: string
        description: User last name.
      username:
        type: string
        description: Username of the user, if any.
      language_code:
        type: string
        description: IETF language tag of the user's language.
      is_premium:
        type: boolean
        description: True if the user is a Telegram Premium subscriber.
      added_to_attachment_menu:
        type: boolean
        description: True if the user added the bot to the attachment menu.
      can_join_groups:
        type: boolean
        description: True if the bot can join groups.
      can_read_all_group_messages:
        type: boolean
        description: True if privacy mode is disabled for the bot.
      supports_inline_queries:
        type: boolean
        description: True if the bot can be invited to inline mode.
      can_connect_to_business:
        type: boolean
        description: True if the bot can connect to Telegram Business accounts.
      has_main_web_app:
        type: boolean
        description: True if the bot has a main Web App.

  Chat:
    type: object
    description: Telegram Chat object as defined in the Bot API.
    additionalProperties: true
    properties:
      id:
        type: integer
        description: Unique identifier for this chat.
      type:
        type: string
        description: Type of chat, such as private, group, supergroup, or channel.
      title:
        type: string
        description: Chat title for supergroups, channels, and group chats.
      username:
        type: string
        description: Username of the chat if available.
      first_name:
        type: string
        description: First name of the other party in a private chat.
      last_name:
        type: string
        description: Last name of the other party in a private chat.
      is_forum:
        type: boolean
        description: True if the supergroup chat is a forum.
      photo:
        type: object
        description: Chat photo information.
      active_usernames:
        type: array
        items:
          type: string
        description: List of all active chat usernames.
      emoji_status_custom_emoji_id:
        type: string
        description: Custom emoji identifier of the chat emoji status.
      bio:
        type: string
        description: Bio of the other party in a private chat.
      has_private_forwards:
        type: boolean
        description: True if privacy settings allow private forwards.
      has_restricted_voice_and_video_messages:
        type: boolean
        description: True if voice and video messages are restricted.
      join_to_send_messages:
        type: boolean
        description: True if all users must join before they can send messages.
      join_by_request:
        type: boolean
        description: True if only users invited by administrators can join.
      description:
        type: string
        description: Chat description for supergroups and channels.
      invite_link:
        type: string
        description: Primary invite link for the chat.
      pinned_message:
        $ref: "#/$defs/Message"
      permissions:
        type: object
        description: Default chat member permissions.
      slow_mode_delay:
        type: integer
        description: Allowed delay between consecutive messages for non-administrators.
      message_auto_delete_time:
        type: integer
        description: Time after which messages are automatically deleted.
      has_protected_content:
        type: boolean
        description: True if content protection is enabled.
      sticker_set_name:
        type: string
        description: Name of the group sticker set.
      can_set_sticker_set:
        type: boolean
        description: True if the bot can change the group sticker set.
      linked_chat_id:
        type: integer
        description: Identifier of the linked channel for supergroups.
      location:
        type: object
        description: Location to which the supergroup is connected.
      has_hidden_members:
        type: boolean
        description: True if members are hidden in the chat.
      has_aggressive_anti_spam_enabled:
        type: boolean
        description: True if aggressive anti-spam is enabled.
      has_hidden_participants:
        type: boolean
        description: True if only admins can see other participants.
      has_visible_history:
        type: boolean
        description: True if new members can see message history.
      boost_level:
        type: integer
        description: Current boost level of the chat.
      emoji_status_expiration_date:
        type: integer
        description: Expiration date of the emoji status in Unix time.
      custom_emoji_sticker_set_name:
        type: string
        description: Name of the custom emoji sticker set used in the chat.
      business_intro:
        type: object
        description: Business intro information for the chat.
      business_location:
        type: object
        description: Business location information for the chat.
      business_opening_hours:
        type: object
        description: Business opening hours for the chat.
      personal_chat:
        type: object
        description: Personal chat information if applicable.

  MessageEntity:
    type: object
    description: Special entity in a text message.
    additionalProperties: true
    properties:
      type:
        type: string
        description: Type of the entity.
      offset:
        type: integer
        description: Offset in UTF-16 code units to the start of the entity.
      length:
        type: integer
        description: Length of the entity in UTF-16 code units.
      url:
        type: string
        description: URL for "text_link" entity.
      user:
        $ref: "#/$defs/User"
      language:
        type: string
        description: Programming language of the entity text for "pre".
      custom_emoji_id:
        type: string
        description: Identifier of a custom emoji.

  PhotoSize:
    type: object
    description: Size of a photo or a file / sticker thumbnail.
    additionalProperties: true
    properties:
      file_id:
        type: string
        description: Identifier for this file.
      file_unique_id:
        type: string
        description: Unique identifier for this file.
      width:
        type: integer
        description: Photo width.
      height:
        type: integer
        description: Photo height.
      file_size:
        type: integer
        description: File size in bytes.

  Animation:
    type: object
    description: Animation file information.
    additionalProperties: true
    properties:
      file_id:
        type: string
        description: Identifier for this file.
      file_unique_id:
        type: string
        description: Unique file identifier.
      width:
        type: integer
        description: Video width.
      height:
        type: integer
        description: Video height.
      duration:
        type: integer
        description: Duration of the video in seconds.
      thumbnail:
        $ref: "#/$defs/PhotoSize"
      file_name:
        type: string
        description: Original animation filename.
      mime_type:
        type: string
        description: MIME type of the file.
      file_size:
        type: integer
        description: File size in bytes.

  Audio:
    type: object
    description: Audio file information.
    additionalProperties: true
    properties:
      file_id:
        type: string
        description: Identifier for this file.
      file_unique_id:
        type: string
        description: Unique identifier for this file.
      duration:
        type: integer
        description: Duration in seconds.
      performer:
        type: string
        description: Performer of the audio.
      title:
        type: string
        description: Track name.
      file_name:
        type: string
        description: Original filename.
      mime_type:
        type: string
        description: MIME type.
      file_size:
        type: integer
        description: File size in bytes.
      thumbnail:
        $ref: "#/$defs/PhotoSize"

  Document:
    type: object
    description: General file information.
    additionalProperties: true
    properties:
      file_id:
        type: string
        description: Identifier for this file.
      file_unique_id:
        type: string
        description: Unique identifier for this file.
      thumbnail:
        $ref: "#/$defs/PhotoSize"
      file_name:
        type: string
        description: Original filename.
      mime_type:
        type: string
        description: MIME type of the file.
      file_size:
        type: integer
        description: File size in bytes.

  Video:
    type: object
    description: Video file information.
    additionalProperties: true
    properties:
      file_id:
        type: string
        description: Identifier for this file.
      file_unique_id:
        type: string
        description: Unique identifier for this file.
      width:
        type: integer
        description: Video width.
      height:
        type: integer
        description: Video height.
      duration:
        type: integer
        description: Duration of the video in seconds.
      thumbnail:
        $ref: "#/$defs/PhotoSize"
      file_name:
        type: string
        description: Original filename.
      mime_type:
        type: string
        description: MIME type of the file.
      file_size:
        type: integer
        description: File size in bytes.

  VideoNote:
    type: object
    description: Video note information.
    additionalProperties: true
    properties:
      file_id:
        type: string
        description: Identifier for this file.
      file_unique_id:
        type: string
        description: Unique identifier for this file.
      length:
        type: integer
        description: Diameter of the video message in pixels.
      duration:
        type: integer
        description: Duration in seconds.
      thumbnail:
        $ref: "#/$defs/PhotoSize"
      file_size:
        type: integer
        description: File size in bytes.

  Voice:
    type: object
    description: Voice note information.
    additionalProperties: true
    properties:
      file_id:
        type: string
        description: Identifier for this file.
      file_unique_id:
        type: string
        description: Unique identifier for this file.
      duration:
        type: integer
        description: Duration in seconds.
      mime_type:
        type: string
        description: MIME type of the file.
      file_size:
        type: integer
        description: File size in bytes.

  Contact:
    type: object
    description: Contact information shared with the bot.
    additionalProperties: true
    properties:
      phone_number:
        type: string
        description: Contact phone number.
      first_name:
        type: string
        description: Contact first name.
      last_name:
        type: string
        description: Contact last name.
      user_id:
        type: integer
        description: Telegram user identifier if available.
      vcard:
        type: string
        description: Additional data about the contact in vCard format.

  Dice:
    type: object
    description: Animated emoji with random value.
    additionalProperties: true
    properties:
      emoji:
        type: string
        description: Emoji on which the dice throw animation is based.
      value:
        type: integer
        description: Value of the dice.

  Poll:
    type: object
    description: Poll information.
    additionalProperties: true
    properties:
      id:
        type: string
        description: Unique poll identifier.
      question:
        type: string
        description: Poll question.
      options:
        type: array
        description: List of poll options.
        items:
          type: object
      total_voter_count:
        type: integer
        description: Total number of users that voted in the poll.
      is_closed:
        type: boolean
        description: True if the poll is closed.
      is_anonymous:
        type: boolean
        description: True if the poll is anonymous.
      type:
        type: string
        description: Poll type, currently "regular" or "quiz".
      allows_multiple_answers:
        type: boolean
        description: True if the poll allows multiple answers.
      correct_option_id:
        type: integer
        description: 0-based identifier of the correct option for quiz-style polls.
      explanation:
        type: string
        description: Text that is shown when a user chooses an incorrect answer or taps the lamp icon.
      open_period:
        type: integer
        description: Amount of time in seconds the poll will be active after creation.
      close_date:
        type: integer
        description: Point in time when the poll will be automatically closed.

  Location:
    type: object
    description: Geographical position information.
    additionalProperties: true
    properties:
      longitude:
        type: number
        description: Longitude as defined by sender.
      latitude:
        type: number
        description: Latitude as defined by sender.
      horizontal_accuracy:
        type: number
        description: The radius of uncertainty for the location.
      live_period:
        type: integer
        description: Time during which the location can be updated.
      heading:
        type: integer
        description: Direction in which user is moving.
      proximity_alert_radius:
        type: integer
        description: Maximum distance for proximity alerts.

  Venue:
    type: object
    description: Venue information.
    additionalProperties: true
    properties:
      location:
        $ref: "#/$defs/Location"
      title:
        type: string
        description: Name of the venue.
      address:
        type: string
        description: Address of the venue.
      foursquare_id:
        type: string
        description: Foursquare identifier of the venue.
      foursquare_type:
        type: string
        description: Type of the venue in Foursquare.
      google_place_id:
        type: string
        description: Google Places identifier of the venue.
      google_place_type:
        type: string
        description: Type of the venue in Google Places.

  Message:
    type: object
    description: Telegram Message object as defined in the Bot API.
    additionalProperties: true
    properties:
      message_id:
        type: integer
        description: Unique message identifier inside this chat.
      message_thread_id:
        type: integer
        description: Identifier of the message thread to which the message belongs.
      from:
        $ref: "#/$defs/User"
      sender_chat:
        $ref: "#/$defs/Chat"
      sender_boost_count:
        type: integer
        description: Number of boosts applied by the sender at the time of sending.
      sender_business_bot:
        $ref: "#/$defs/User"
      date:
        type: integer
        description: Date the message was sent in Unix time.
      business_connection_id:
        type: string
        description: Unique identifier of the business connection through which the message was received.
      chat:
        $ref: "#/$defs/Chat"
      forward_origin:
        type: object
        description: Information about the original message when forwarded.
      is_topic_message:
        type: boolean
        description: True if the message is a forum topic message.
      is_automatic_forward:
        type: boolean
        description: True if the message is automatically forwarded.
      reply_to_message:
        $ref: "#/$defs/Message"
      external_reply:
        type: object
        description: Information about external replies.
      quote:
        type: object
        description: Quote attached to the message.
      reply_to_story:
        type: object
        description: Story that the message is replying to.
      via_bot:
        $ref: "#/$defs/User"
      edit_date:
        type: integer
        description: Date the message was last edited in Unix time.
      has_protected_content:
        type: boolean
        description: True if the message is protected from forwarding and saving.
      is_from_offline:
        type: boolean
        description: True if the message was sent via the bot's offline queue.
      media_group_id:
        type: string
        description: Media group identifier.
      author_signature:
        type: string
        description: Signature of the post author for channel messages.
      text:
        type: string
        description: Text of the message.
      entities:
        type: array
        description: Special entities in the message text.
        items:
          $ref: "#/$defs/MessageEntity"
      link_preview_options:
        type: object
        description: Options used for link previews.
      effect_id:
        type: string
        description: Unique identifier of the message effect.
      animation:
        $ref: "#/$defs/Animation"
      audio:
        $ref: "#/$defs/Audio"
      document:
        $ref: "#/$defs/Document"
      paid_media:
        type: object
        description: Information about paid media included in the message.
      photo:
        type: array
        description: Available sizes of the photo.
        items:
          $ref: "#/$defs/PhotoSize"
      sticker:
        type: object
        description: Sticker information included in the message.
      story:
        type: object
        description: Story shared in the message.
      video:
        $ref: "#/$defs/Video"
      video_note:
        $ref: "#/$defs/VideoNote"
      voice:
        $ref: "#/$defs/Voice"
      caption:
        type: string
        description: Caption for the animation, audio, document, photo, or video.
      caption_entities:
        type: array
        description: Special entities in the caption.
        items:
          $ref: "#/$defs/MessageEntity"
      show_caption_above_media:
        type: boolean
        description: True if the caption should be shown above the media.
      has_media_spoiler:
        type: boolean
        description: True if the message has a spoiler animation.
      contact:
        $ref: "#/$defs/Contact"
      dice:
        $ref: "#/$defs/Dice"
      game:
        type: object
        description: Game shared in the message.
      poll:
        $ref: "#/$defs/Poll"
      venue:
        $ref: "#/$defs/Venue"
      location:
        $ref: "#/$defs/Location"
      new_chat_members:
        type: array
        description: New members that were added to the group.
        items:
          $ref: "#/$defs/User"
      left_chat_member:
        $ref: "#/$defs/User"
      new_chat_title:
        type: string
        description: New chat title if it was changed.
      new_chat_photo:
        type: array
        description: New chat photo.
        items:
          $ref: "#/$defs/PhotoSize"
      delete_chat_photo:
        type: boolean
        description: True if the chat photo was deleted.
      group_chat_created:
        type: boolean
        description: True if the group has been created.
      supergroup_chat_created:
        type: boolean
        description: True if the supergroup has been created.
      channel_chat_created:
        type: boolean
        description: True if the channel has been created.
      message_auto_delete_timer_changed:
        type: object
        description: Service message about message auto-delete timer changed.
      migrate_to_chat_id:
        type: integer
        description: Identifier of the supergroup the chat migrated to.
      migrate_from_chat_id:
        type: integer
        description: Identifier of the chat the supergroup migrated from.
      pinned_message:
        $ref: "#/$defs/Message"
      invoice:
        type: object
        description: Invoice information.
      successful_payment:
        type: object
        description: Information about a successful payment.
      refunded_payment:
        type: object
        description: Information about a refunded payment.
      users_shared:
        type: object
        description: Information about shared users.
      chat_shared:
        type: object
        description: Information about a shared chat.
      connected_website:
        type: string
        description: The domain name of the website on which the user has logged in.
      write_access_allowed:
        type: object
        description: Information about granted write access.
      passport_data:
        type: object
        description: Telegram Passport data.
      proximity_alert_triggered:
        type: object
        description: Proximity alert triggered information.
      boost_added:
        type: object
        description: Service message about a boost added to the chat.
      chat_background_set:
        type: object
        description: Information about chat background set.
      forum_topic_created:
        type: object
        description: Service message about a forum topic created.
      forum_topic_edited:
        type: object
        description: Service message about a forum topic edited.
      forum_topic_closed:
        type: object
        description: Service message about a forum topic closed.
      forum_topic_reopened:
        type: object
        description: Service message about a forum topic reopened.
      general_forum_topic_hidden:
        type: object
        description: Service message about the general forum topic hidden.
      general_forum_topic_unhidden:
        type: object
        description: Service message about the general forum topic unhidden.
      giveaway_created:
        type: object
        description: Information about a giveaway created.
      giveaway:
        type: object
        description: Information about an active giveaway.
      giveaway_winners:
        type: object
        description: Information about giveaway winners.
      giveaway_completed:
        type: object
        description: Information about a completed giveaway.
      video_chat_scheduled:
        type: object
        description: Information about a scheduled video chat.
      video_chat_started:
        type: object
        description: Information about a started video chat.
      video_chat_ended:
        type: object
        description: Information about an ended video chat.
      video_chat_participants_invited:
        type: object
        description: Service message about video chat participants invited.
      web_app_data:
        type: object
        description: Data sent from a Web App.
      reply_markup:
        type: object
        description: Inline keyboard attached to the message.

extra:
  python:
    source: events/channel_posts/channel_post_created.py
