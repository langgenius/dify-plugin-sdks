identity:
  name: file_permission_member_removed_v1
  author: langgenius
  label:
    en_US: Drive Access Revoked
    zh_Hans: 云文档共享权限移除
    ja_JP: ドライブ権限削除

description:
  human:
    en_US: Triggers when collaborators or groups are removed from a Drive file.
    zh_Hans: 当协作者或群组从云文档共享中被移除时触发。
    ja_JP: ドライブファイルから共同編集者やグループが削除されたときにトリガーされます。
  llm:
    en_US: Fires when sharing permissions are revoked on a Drive file, detailing the removed users, chats, and departments.
    zh_Hans: 当云文档撤销共享权限时触发，提供被移除的用户、群聊和部门信息。
    ja_JP: ドライブファイルの共有権限が削除された際に発火し、削除されたユーザー、チャット、部門の詳細を提供します。

parameters: []

output_schema:
  type: object
  properties:
    file_token:
      type: string
      description:
        en_US: Token of the affected file
        zh_Hans: 受影响文件的 Token
        ja_JP: 対象ファイルのトークン

    file_type:
      type: string
      description:
        en_US: File type (doc, sheet, slide, etc.)
        zh_Hans: 文件类型（文档、表格、幻灯片等）
        ja_JP: ファイルタイプ（ドキュメント、スプレッドシートなど）

    operator_user_id:
      type: string
      description:
        en_US: User ID of the operator who removed access
        zh_Hans: 移除权限的用户 ID
        ja_JP: 権限を削除したユーザーID

    operator_open_id:
      type: string
      description:
        en_US: Open ID of the operator
        zh_Hans: 操作用户的 Open ID
        ja_JP: 操作ユーザーのOpen ID

    operator_union_id:
      type: string
      description:
        en_US: Union ID of the operator
        zh_Hans: 操作用户的 Union ID
        ja_JP: 操作ユーザーのUnion ID

    removed_users:
      type: array
      description:
        en_US: Users who lost access
        zh_Hans: 失去访问权限的用户列表
        ja_JP: アクセス権を失ったユーザー一覧
      items:
        type: object
        properties:
          user_id:
            type: string
            description:
              en_US: User ID
              zh_Hans: 用户 ID
              ja_JP: ユーザーID
          open_id:
            type: string
            description:
              en_US: Open ID
              zh_Hans: Open ID
              ja_JP: Open ID
          union_id:
            type: string
            description:
              en_US: Union ID
              zh_Hans: Union ID
              ja_JP: Union ID

    removed_user_count:
      type: integer
      description:
        en_US: Number of users who lost access
        zh_Hans: 失去访问权限的用户数量
        ja_JP: アクセス権を失ったユーザー数

    removed_chats:
      type: array
      description:
        en_US: Chat IDs removed from access
        zh_Hans: 被移除访问权限的群聊 ID
        ja_JP: アクセス権が削除されたチャットID
      items:
        type: string

    removed_departments:
      type: array
      description:
        en_US: Department IDs removed from access
        zh_Hans: 被移除访问权限的部门 ID
        ja_JP: アクセス権が削除された部門ID
      items:
        type: string

    subscriber_users:
      type: array
      description:
        en_US: Subscribers of the file
        zh_Hans: 文件订阅者列表
        ja_JP: ファイルの購読者一覧
      items:
        type: object
        properties:
          user_id:
            type: string
            description:
              en_US: User ID
              zh_Hans: 用户 ID
              ja_JP: ユーザーID
          open_id:
            type: string
            description:
              en_US: Open ID
              zh_Hans: Open ID
              ja_JP: Open ID
          union_id:
            type: string
            description:
              en_US: Union ID
              zh_Hans: Union ID
              ja_JP: Union ID

    subscriber_count:
      type: integer
      description:
        en_US: Number of subscribers receiving the update
        zh_Hans: 收到更新的订阅者数量
        ja_JP: 更新を受け取る購読者数

extra:
  python:
    source: events/drive/file_permission_member_removed_v1.py
