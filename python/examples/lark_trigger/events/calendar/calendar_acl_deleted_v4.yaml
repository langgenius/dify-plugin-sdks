identity:
  name: calendar_acl_deleted_v4
  author: langgenius
  label:
    en_US: Calendar Access Revoked
    zh_Hans: 日历权限移除
    ja_JP: カレンダー権限が削除されました

description:
  en_US: Fires when access to a calendar is revoked, providing the removed scope and recipients.
  zh_Hans: 当日历访问被撤销时触发，提供被移除的范围和接收者信息。
  ja_JP: カレンダーへのアクセスが取り消されたときに発火し、削除された対象と権限を提供します。

parameters: []

output_schema:
  type: object
  properties:
    acl_id:
      type: string
      description:
        en_US: ACL identifier for the revoked permission
        zh_Hans: 被撤销权限的 ACL 标识
        ja_JP: 削除された権限の ACL 識別子

    role:
      type: string
      description:
        en_US: Role that was removed from the recipients
        zh_Hans: 从接收者移除的角色
        ja_JP: 受信者から削除されたロール

    scope_type:
      type: string
      description:
        en_US: Scope type affected (user, chat, department)
        zh_Hans: 受影响的权限范围类型（用户、群组、部门）
        ja_JP: 影響を受けた対象タイプ（ユーザー、チャット、部門）

    scope_user_id:
      type: string
      description:
        en_US: User ID of the revoked scope when applicable
        zh_Hans: 撤销范围的用户 ID（如适用）
        ja_JP: 対象ユーザーのユーザーID（該当する場合）

    scope_open_id:
      type: string
      description:
        en_US: Open ID of the revoked scope when applicable
        zh_Hans: 撤销范围的 Open ID（如适用）
        ja_JP: 対象ユーザーのOpen ID（該当する場合）

    scope_union_id:
      type: string
      description:
        en_US: Union ID of the revoked scope when applicable
        zh_Hans: 撤销范围的 Union ID（如适用）
        ja_JP: 対象ユーザーのUnion ID（該当する場合）

    affected_users:
      type: array
      description:
        en_US: Users who lost access
        zh_Hans: 失去访问权限的用户列表
        ja_JP: アクセス権を失ったユーザー一覧
      items:
        type: object
        properties:
          user_id:
            type: string
            description:
              en_US: User ID
              zh_Hans: 用户 ID
              ja_JP: ユーザーID
          open_id:
            type: string
            description:
              en_US: Open ID
              zh_Hans: Open ID
              ja_JP: Open ID
          union_id:
            type: string
            description:
              en_US: Union ID
              zh_Hans: Union ID
              ja_JP: Union ID

extra:
  python:
    source: events/calendar/calendar_acl_deleted_v4.py
