identity:
  name: workflow_run_completed
  author: langgenius
  label:
    en_US: Workflow Run Completed
    zh_Hans: 工作流运行完成
    pt_BR: Execução de Workflow Concluída

description:
  human:
    en_US: Triggers when a GitHub Actions workflow run is completed
    zh_Hans: 当 GitHub Actions 工作流运行完成时触发
    pt_BR: Dispara quando uma execução de workflow do GitHub Actions é concluída
  llm:
    en_US: This trigger activates when a GitHub Actions workflow run is completed, providing detailed information about the workflow run including status, conclusion, and associated metadata.
    zh_Hans: 当 GitHub Actions 工作流运行完成时，此触发器会被激活，提供有关工作流运行的详细信息，包括状态、结论和相关元数据。
    pt_BR: Este gatilho é ativado quando uma execução de workflow do GitHub Actions é concluída, fornecendo informações detalhadas sobre a execução do workflow incluindo status, conclusão e metadados associados.

parameters:
  - name: workflow_filter
    label:
      en_US: Workflow Name Filter
      zh_Hans: 工作流名称过滤器
      pt_BR: Filtro de Nome do Workflow
    type: string
    required: false
    description:
      en_US: Filter by specific workflow name (optional)
      zh_Hans: 按特定工作流名称过滤（可选）
      pt_BR: Filtrar por nome específico do workflow (opcional)
  - name: conclusion_filter
    label:
      en_US: Conclusion Filter
      zh_Hans: 结论过滤器
      pt_BR: Filtro de Conclusão
    type: string
    required: false
    description:
      en_US: Filter by workflow conclusion (success, failure, cancelled, etc.) (optional)
      zh_Hans: 按工作流结论过滤（成功、失败、取消等）（可选）
      pt_BR: Filtrar por conclusão do workflow (sucesso, falha, cancelado, etc.) (opcional)

output_schema:
  type: object
  properties:
    workflow_run:
      type: object
      properties:
        id:
          type: number
          description: The workflow run ID
        name:
          type: string
          description: The name of the workflow run
        display_title:
          type: string
          description: The display title of the workflow run
        run_number:
          type: number
          description: The run number
        run_attempt:
          type: number
          description: The run attempt number
        status:
          type: string
          description: The status of the workflow run
        conclusion:
          type: string
          description: The conclusion of the workflow run
        workflow_id:
          type: number
          description: The ID of the workflow
        url:
          type: string
          description: The API URL of the workflow run
        html_url:
          type: string
          description: The URL to view the workflow run on GitHub
        created_at:
          type: string
          description: When the workflow run was created
        updated_at:
          type: string
          description: When the workflow run was last updated
        run_started_at:
          type: string
          description: When the workflow run started
        jobs_url:
          type: string
          description: The URL to view jobs for this workflow run
        logs_url:
          type: string
          description: The URL to download logs for this workflow run
        check_suite_url:
          type: string
          description: The URL of the associated check suite
        artifacts_url:
          type: string
          description: The URL to view artifacts for this workflow run
        cancel_url:
          type: string
          description: The URL to cancel this workflow run
        rerun_url:
          type: string
          description: The URL to rerun this workflow run
        head_branch:
          type: string
          description: The head branch name
        head_sha:
          type: string
          description: The head commit SHA
        event:
          type: string
          description: The event that triggered this workflow run
        actor:
          type: object
          properties:
            login:
              type: string
              description: The username of the actor
            avatar_url:
              type: string
              description: The avatar URL of the actor
            html_url:
              type: string
              description: The profile URL of the actor
        triggering_actor:
          type: object
          properties:
            login:
              type: string
              description: The username of the triggering actor
            avatar_url:
              type: string
              description: The avatar URL of the triggering actor
            html_url:
              type: string
              description: The profile URL of the triggering actor
        pull_requests:
          type: array
          description: Pull requests associated with this workflow run
          items:
            type: object
            properties:
              number:
                type: number
                description: Pull request number
              head:
                type: object
                properties:
                  ref:
                    type: string
                    description: Head branch name
                  sha:
                    type: string
                    description: Head commit SHA
              base:
                type: object
                properties:
                  ref:
                    type: string
                    description: Base branch name
                  sha:
                    type: string
                    description: Base commit SHA
    workflow:
      type: object
      properties:
        id:
          type: number
          description: The workflow ID
        name:
          type: string
          description: The workflow name
        path:
          type: string
          description: The path to the workflow file
        state:
          type: string
          description: The state of the workflow
        created_at:
          type: string
          description: When the workflow was created
        updated_at:
          type: string
          description: When the workflow was last updated
        url:
          type: string
          description: The API URL of the workflow
        html_url:
          type: string
          description: The URL to view the workflow on GitHub
        badge_url:
          type: string
          description: The URL of the workflow badge
    repository:
      type: object
      properties:
        name:
          type: string
          description: The repository name
        full_name:
          type: string
          description: The full repository name (owner/repo)
        html_url:
          type: string
          description: The repository URL
        description:
          type: string
          description: The repository description
        private:
          type: boolean
          description: Whether the repository is private
        owner:
          type: object
          properties:
            login:
              type: string
              description: Repository owner username
            avatar_url:
              type: string
              description: Repository owner avatar URL
            html_url:
              type: string
              description: Repository owner profile URL
    sender:
      type: object
      properties:
        login:
          type: string
          description: The username who triggered the event
        avatar_url:
          type: string
          description: The avatar URL of the sender
        html_url:
          type: string
          description: The profile URL of the sender
        type:
          type: string
          description: The type of the sender (User, Bot, etc.)

extra:
  python:
    source: triggers/workflow_run_completed.py