identity:
  name: pull_request_review_submitted
  author: langgenius
  label:
    en_US: Pull Request Review Submitted
    zh_Hans: Pull Request Review 提交
    pt_BR: Revisão de Pull Request Submetida

description:
  human:
    en_US: Triggers when a pull request review is submitted
    zh_Hans: 当 pull request 审查提交时触发
    pt_BR: Dispara quando uma revisão de pull request é submetida
  llm:
    en_US: This trigger activates when a pull request review is submitted on a GitHub repository, providing information about the review, pull request, repository, and user who submitted it.
    zh_Hans: 当在 GitHub 仓库中 pull request 审查提交时，此触发器会被激活，提供有关审查、pull request、仓库和submitted它的用户的信息。
    pt_BR: Este gatilho é ativado quando uma revisão de pull request é submitted em um repositório do GitHub, fornecendo informações sobre a revisão, pull request, repositório e usuário que a submitted.

parameters:
  - name: review_state
    label:
      en_US: Review State Filter
      zh_Hans: 审查状态过滤
      pt_BR: Filtro de Estado de Revisão
    type: select
    required: false
    options:
      - value: approved
        label:
          en_US: Approved
          zh_Hans: 已批准
          pt_BR: Aprovado
      - value: changes_requested
        label:
          en_US: Changes Requested
          zh_Hans: 请求更改
          pt_BR: Alterações Solicitadas
      - value: commented
        label:
          en_US: Commented
          zh_Hans: 已评论
          pt_BR: Comentado
    help:
      en_US: "Only trigger for specific review states"
      zh_Hans: "仅对特定审查状态触发"
      pt_BR: "Disparar apenas para estados de revisão específicos"

  - name: author_type
    label:
      en_US: Author Type Filter
      zh_Hans: 作者类型过滤
      pt_BR: Filtro de Tipo de Autor
    type: select
    required: false
    options:
      - value: human_only
        label:
          en_US: Human Only (exclude bots)
          zh_Hans: 仅人类（排除机器人）
          pt_BR: Apenas Humanos (excluir bots)
      - value: bot_only
        label:
          en_US: Bot Only
          zh_Hans: 仅机器人
          pt_BR: Apenas Bots
    help:
      en_US: "Filter reviews by author type"
      zh_Hans: "按作者类型过滤审查"
      pt_BR: "Filtrar revisões por tipo de autor"

  - name: required_reviewers
    label:
      en_US: Required Reviewers
      zh_Hans: 必需审查者
      pt_BR: Revisores Obrigatórios
    type: string
    required: false
    placeholder:
      en_US: "e.g., john-doe, jane-smith, @team-leads (comma-separated)"
      zh_Hans: "例如：john-doe, jane-smith, @team-leads（逗号分隔）"
      pt_BR: "ex: john-doe, jane-smith, @team-leads (separados por vírgula)"
    help:
      en_US: "Only trigger if review is from one of these users/teams"
      zh_Hans: "仅当审查来自这些用户/团队之一时触发"
      pt_BR: "Disparar apenas se a revisão for de um destes usuários/equipes"

output_schema:
  type: object
  properties:
    review:
      type: object
      properties:
        id:
          type: number
          description: The review ID
        body:
          type: string
          description: The review body/comment
        state:
          type: string
          description: The review state (approved, changes_requested, commented)
        html_url:
          type: string
          description: The URL to view the review on GitHub
        submitted_at:
          type: string
          description: When the review was submitted
        author:
          type: object
          properties:
            login:
              type: string
              description: The username of the review author
            avatar_url:
              type: string
              description: The avatar URL of the review author
            html_url:
              type: string
              description: The profile URL of the review author
    pull_request:
      type: object
      properties:
        number:
          type: number
          description: The pull request number
        title:
          type: string
          description: The pull request title
        body:
          type: string
          description: The pull request description
        state:
          type: string
          description: The pull request state
        html_url:
          type: string
          description: The URL to view the pull request on GitHub
        author:
          type: object
          properties:
            login:
              type: string
              description: The username of the pull request author
            avatar_url:
              type: string
              description: The avatar URL of the pull request author
            html_url:
              type: string
              description: The profile URL of the pull request author
    repository:
      type: object
      properties:
        name:
          type: string
          description: The repository name
        full_name:
          type: string
          description: The full repository name (owner/repo)
        html_url:
          type: string
          description: The repository URL
        description:
          type: string
          description: The repository description
        private:
          type: boolean
          description: Whether the repository is private
        owner:
          type: object
          properties:
            login:
              type: string
              description: Repository owner username
            avatar_url:
              type: string
              description: Repository owner avatar URL
            html_url:
              type: string
              description: Repository owner profile URL
    sender:
      type: object
      properties:
        login:
          type: string
          description: The username who submitted the review
        avatar_url:
          type: string
          description: The avatar URL of the sender
        html_url:
          type: string
          description: The profile URL of the sender
        type:
          type: string
          description: The type of the sender (User, Bot, etc.)

extra:
  python:
    source: triggers/pull_request_review_submitted.py