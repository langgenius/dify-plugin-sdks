identity:
  name: milestone
  author: langgenius
  label:
    en_US: Milestone
    zh_Hans: 里程碑
    pt_BR: Marco

description:
  human:
    en_US: Triggers on milestone events (created, deleted, edited, opened, closed)
    zh_Hans: 在里程碑事件时触发（创建、删除、编辑、打开、关闭）
    pt_BR: Dispara em eventos de marco (criado, excluído, editado, aberto, fechado)
  llm:
    en_US: This trigger activates on various GitHub milestone events, providing comprehensive information about the milestone, repository, and involved users.
    zh_Hans: 此触发器在各种 GitHub 里程碑事件时激活，提供有关里程碑、仓库和相关用户的综合信息。
    pt_BR: Este gatilho é ativado em vários eventos de marco do GitHub, fornecendo informações abrangentes sobre o marco, repositório e usuários envolvidos.

parameters:
  - name: action_filter
    label:
      en_US: Action Filter
      zh_Hans: 操作过滤
      pt_BR: Filtro de Ação
    type: select
    required: false
    options:
      - value: created
        label:
          en_US: Created
          zh_Hans: 创建
          pt_BR: Criado
      - value: deleted
        label:
          en_US: Deleted
          zh_Hans: 删除
          pt_BR: Excluído
      - value: edited
        label:
          en_US: Edited
          zh_Hans: 编辑
          pt_BR: Editado
      - value: opened
        label:
          en_US: Opened
          zh_Hans: 打开
          pt_BR: Aberto
      - value: closed
        label:
          en_US: Closed
          zh_Hans: 关闭
          pt_BR: Fechado
    multiple: true
    help:
      en_US: "Select which milestone actions to trigger on (leave empty for all)"
      zh_Hans: "选择触发的里程碑操作（留空表示所有）"
      pt_BR: "Selecione quais ações de marco devem disparar (deixe vazio para todas)"

  - name: milestone_title_filter
    label:
      en_US: Milestone Title Filter
      zh_Hans: 里程碑标题过滤
      pt_BR: Filtro de Título do Marco
    type: string
    required: false
    placeholder:
      en_US: "e.g., v1.0, v2.0, release-* (comma-separated, supports wildcards)"
      zh_Hans: "例如：v1.0, v2.0, release-*（逗号分隔，支持通配符）"
      pt_BR: "ex: v1.0, v2.0, release-* (separados por vírgula, suporta wildcards)"
    help:
      en_US: "Only trigger for milestones with these titles"
      zh_Hans: "仅对具有这些标题的里程碑触发"
      pt_BR: "Disparar apenas para marcos com esses títulos"

  - name: milestone_state_filter
    label:
      en_US: Milestone State Filter
      zh_Hans: 里程碑状态过滤
      pt_BR: Filtro de Estado do Marco
    type: select
    required: false
    options:
      - value: open
        label:
          en_US: Open
          zh_Hans: 打开
          pt_BR: Aberto
      - value: closed
        label:
          en_US: Closed
          zh_Hans: 关闭
          pt_BR: Fechado
    help:
      en_US: "Filter by milestone state"
      zh_Hans: "按里程碑状态过滤"
      pt_BR: "Filtrar por estado do marco"

  - name: due_date_filter
    label:
      en_US: Due Date Filter
      zh_Hans: 截止日期过滤
      pt_BR: Filtro de Data de Vencimento
    type: select
    required: false
    options:
      - value: has_due_date
        label:
          en_US: Has Due Date
          zh_Hans: 有截止日期
          pt_BR: Tem Data de Vencimento
      - value: no_due_date
        label:
          en_US: No Due Date
          zh_Hans: 无截止日期
          pt_BR: Sem Data de Vencimento
    help:
      en_US: "Filter by whether milestone has a due date"
      zh_Hans: "按里程碑是否有截止日期过滤"
      pt_BR: "Filtrar por se o marco tem data de vencimento"

output_schema:
  type: object
  properties:
    action:
      type: string
      description: The action that was performed on the milestone
    milestone:
      type: object
      properties:
        id:
          type: number
          description: The milestone ID
        number:
          type: number
          description: The milestone number
        title:
          type: string
          description: The milestone title
        description:
          type: string
          description: The milestone description
        state:
          type: string
          description: The state of the milestone (open, closed)
        html_url:
          type: string
          description: The URL to view the milestone on GitHub
        created_at:
          type: string
          description: When the milestone was created
        updated_at:
          type: string
          description: When the milestone was last updated
        due_on:
          type: string
          description: The milestone due date
        closed_at:
          type: string
          description: When the milestone was closed (if applicable)
        creator:
          type: object
          properties:
            login:
              type: string
              description: The milestone creator's username
            avatar_url:
              type: string
              description: The milestone creator's avatar URL
            html_url:
              type: string
              description: The milestone creator's profile URL
        open_issues:
          type: number
          description: Number of open issues in this milestone
        closed_issues:
          type: number
          description: Number of closed issues in this milestone
    repository:
      type: object
      properties:
        name:
          type: string
          description: The repository name
        full_name:
          type: string
          description: The full repository name (owner/repo)
        html_url:
          type: string
          description: The repository URL
        description:
          type: string
          description: The repository description
        private:
          type: boolean
          description: Whether the repository is private
        owner:
          type: object
          properties:
            login:
              type: string
              description: Repository owner username
            avatar_url:
              type: string
              description: Repository owner avatar URL
            html_url:
              type: string
              description: Repository owner profile URL
    sender:
      type: object
      properties:
        login:
          type: string
          description: The username who triggered the event
        avatar_url:
          type: string
          description: The avatar URL of the sender
        html_url:
          type: string
          description: The profile URL of the sender
        type:
          type: string
          description: The type of the sender (User, Bot, etc.)
    changes:
      type: object
      description: Changes made (only for edited action)
      properties:
        title:
          type: object
          properties:
            from:
              type: string
              description: Previous title
        description:
          type: object
          properties:
            from:
              type: string
              description: Previous description
        due_on:
          type: object
          properties:
            from:
              type: string
              description: Previous due date
        state:
          type: object
          properties:
            from:
              type: string
              description: Previous state

extra:
  python:
    source: triggers/milestone.py