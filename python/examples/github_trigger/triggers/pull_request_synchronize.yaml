identity:
  name: pull_request_synchronize
  author: langgenius
  label:
    en_US: Pull Request Synchronized
    zh_Hans: Pull Request 同步
    pt_BR: Pull Request Sincronizado

description:
  human:
    en_US: Triggers when a pull request is synchronized (new commits pushed)
    zh_Hans: 当 pull request 同步时触发（推送新提交）
    pt_BR: Dispara quando um pull request é sincronizado (novos commits enviados)
  llm:
    en_US: This trigger activates when a pull request is synchronized on a GitHub repository, typically when new commits are pushed to the head branch, providing information about the updated pull request and the commit changes.
    zh_Hans: 当在 GitHub 仓库中同步 pull request 时，此触发器会被激活，通常是当新提交推送到 head 分支时，提供有关更新的 pull request 和提交更改的信息。
    pt_BR: Este gatilho é ativado quando um pull request é sincronizado em um repositório do GitHub, tipicamente quando novos commits são enviados para o branch head, fornecendo informações sobre o pull request atualizado e as mudanças de commit.

parameters:
  - name: file_patterns
    label:
      en_US: File Pattern Filter
      zh_Hans: 文件模式过滤
      pt_BR: Filtro de Padrão de Arquivo
    type: string
    required: false
    placeholder:
      en_US: "e.g., *.js, src/**/*.ts, !*.test.* (comma-separated, supports wildcards)"
      zh_Hans: "例如：*.js, src/**/*.ts, !*.test.*（逗号分隔，支持通配符）"
      pt_BR: "ex: *.js, src/**/*.ts, !*.test.* (separados por vírgula, suporta wildcards)"
    help:
      en_US: "Only trigger if modified files match these patterns (! prefix to exclude)"
      zh_Hans: "仅当修改的文件匹配这些模式时触发（!前缀表示排除）"
      pt_BR: "Disparar apenas se arquivos modificados corresponderem a estes padrões (! para excluir)"

  - name: max_commits
    label:
      en_US: Maximum Commits
      zh_Hans: 最大提交数
      pt_BR: Máximo de Commits
    type: number
    required: false
    placeholder:
      en_US: "e.g., 10 (ignore large updates)"
      zh_Hans: "例如：10（忽略大型更新）"
      pt_BR: "ex: 10 (ignorar grandes atualizações)"
    help:
      en_US: "Skip if PR sync includes more than this many commits"
      zh_Hans: "如果 PR 同步包含超过此数量的提交则跳过"
      pt_BR: "Pular se a sincronização do PR incluir mais commits que este número"

  - name: skip_draft
    label:
      en_US: Skip Draft PRs
      zh_Hans: 跳过草稿 PR
      pt_BR: Pular PRs de Rascunho
    type: boolean
    required: false
    default: false
    help:
      en_US: "Don't trigger for draft pull requests"
      zh_Hans: "不对草稿 Pull Request 触发"
      pt_BR: "Não disparar para pull requests em rascunho"

  - name: force_push_only
    label:
      en_US: Force Push Only
      zh_Hans: 仅强制推送
      pt_BR: Apenas Force Push
    type: boolean
    required: false
    default: false
    help:
      en_US: "Only trigger for force pushes (rebases, amends)"
      zh_Hans: "仅对强制推送触发（rebase、amend）"
      pt_BR: "Disparar apenas para force pushes (rebases, amends)"

output_schema:
  type: object
  properties:
    pull_request:
      type: object
      properties:
        number:
          type: number
          description: The pull request number
        title:
          type: string
          description: The pull request title
        body:
          type: string
          description: The pull request description
        state:
          type: string
          description: The pull request state
        html_url:
          type: string
          description: The URL to view the pull request on GitHub
        updated_at:
          type: string
          description: When the pull request was last updated
        draft:
          type: boolean
          description: Whether the pull request is a draft
        merged:
          type: boolean
          description: Whether the pull request is merged
        author:
          type: object
          properties:
            login:
              type: string
              description: The username of the pull request author
            avatar_url:
              type: string
              description: The avatar URL of the pull request author
            html_url:
              type: string
              description: The profile URL of the pull request author
        head:
          type: object
          properties:
            ref:
              type: string
              description: The head branch name
            sha:
              type: string
              description: The head commit SHA
            repo_name:
              type: string
              description: The head repository full name
        base:
          type: object
          properties:
            ref:
              type: string
              description: The base branch name
            sha:
              type: string
              description: The base commit SHA
            repo_name:
              type: string
              description: The base repository full name
    before:
      type: string
      description: The SHA of the commit before the synchronization
    after:
      type: string
      description: The SHA of the commit after the synchronization
    repository:
      type: object
      properties:
        name:
          type: string
          description: The repository name
        full_name:
          type: string
          description: The full repository name (owner/repo)
        html_url:
          type: string
          description: The repository URL
        description:
          type: string
          description: The repository description
        private:
          type: boolean
          description: Whether the repository is private
        owner:
          type: object
          properties:
            login:
              type: string
              description: Repository owner username
            avatar_url:
              type: string
              description: Repository owner avatar URL
            html_url:
              type: string
              description: Repository owner profile URL
    sender:
      type: object
      properties:
        login:
          type: string
          description: The username who triggered the synchronization
        avatar_url:
          type: string
          description: The avatar URL of the sender
        html_url:
          type: string
          description: The profile URL of the sender
        type:
          type: string
          description: The type of the sender (User, Bot, etc.)

extra:
  python:
    source: triggers/pull_request_synchronize.py