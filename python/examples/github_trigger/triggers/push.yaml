identity:
  name: push
  author: langgenius
  label:
    en_US: Push
    zh_Hans: 推送
    pt_BR: Push

description:
  human:
    en_US: Triggers when commits are pushed to a repository
    zh_Hans: 当提交推送到仓库时触发
    pt_BR: Dispara quando commits são enviados para um repositório
  llm:
    en_US: This trigger activates when commits are pushed to a GitHub repository, providing detailed information about the commits, the branch they were pushed to, and the repository.
    zh_Hans: 当提交推送到 GitHub 仓库时，此触发器会被激活，提供有关提交、推送到的分支和仓库的详细信息。
    pt_BR: Este gatilho é ativado quando commits são enviados para um repositório do GitHub, fornecendo informações detalhadas sobre os commits, o branch para o qual foram enviados e o repositório.

parameters:
  - name: branches
    label:
      en_US: Branch Filter
      zh_Hans: 分支过滤
      pt_BR: Filtro de Branch
    type: string
    required: false
    placeholder:
      en_US: "e.g., main, develop, release/* (comma-separated, supports wildcards)"
      zh_Hans: "例如：main, develop, release/*（逗号分隔，支持通配符）"
      pt_BR: "ex: main, develop, release/* (separados por vírgula, suporta wildcards)"
    help:
      en_US: "Only trigger for commits to these branches. Leave empty for all branches."
      zh_Hans: "仅对这些分支的提交触发。留空则监听所有分支。"
      pt_BR: "Disparar apenas para commits nestes branches. Deixe vazio para todos."

  - name: paths
    label:
      en_US: Path Filter
      zh_Hans: 路径过滤
      pt_BR: Filtro de Caminho
    type: string
    required: false
    placeholder:
      en_US: "e.g., src/**, *.js, docs/*.md (comma-separated glob patterns)"
      zh_Hans: "例如：src/**, *.js, docs/*.md（逗号分隔的 glob 模式）"
      pt_BR: "ex: src/**, *.js, docs/*.md (padrões glob separados por vírgula)"
    help:
      en_US: "Only trigger when files matching these patterns are changed"
      zh_Hans: "仅当匹配这些模式的文件发生变化时触发"
      pt_BR: "Disparar apenas quando arquivos correspondentes forem alterados"

  - name: ignore_patterns
    label:
      en_US: Ignore Commit Messages
      zh_Hans: 忽略提交消息
      pt_BR: Ignorar Mensagens de Commit
    type: string
    required: false
    placeholder:
      en_US: "e.g., [skip ci], WIP, [no-trigger] (comma-separated)"
      zh_Hans: "例如：[skip ci], WIP, [no-trigger]（逗号分隔）"
      pt_BR: "ex: [skip ci], WIP, [no-trigger] (separados por vírgula)"
    help:
      en_US: "Ignore commits with messages containing these patterns"
      zh_Hans: "忽略包含这些模式的提交消息"
      pt_BR: "Ignorar commits com mensagens contendo estes padrões"

  - name: exclude_authors
    label:
      en_US: Exclude Authors
      zh_Hans: 排除作者
      pt_BR: Excluir Autores
    type: string
    required: false
    placeholder:
      en_US: "e.g., dependabot[bot], renovate[bot] (comma-separated)"
      zh_Hans: "例如：dependabot[bot], renovate[bot]（逗号分隔）"
      pt_BR: "ex: dependabot[bot], renovate[bot] (separados por vírgula)"
    help:
      en_US: "Ignore commits from these authors"
      zh_Hans: "忽略这些作者的提交"
      pt_BR: "Ignorar commits destes autores"

output_schema:
  type: object
  properties:
    push:
      type: object
      properties:
        ref:
          type: string
          description: The full git ref that was pushed
        branch:
          type: string
          description: The branch name that was pushed to
        before:
          type: string
          description: The SHA of the most recent commit before the push
        after:
          type: string
          description: The SHA of the most recent commit after the push
        created:
          type: boolean
          description: Whether this push created the branch
        deleted:
          type: boolean
          description: Whether this push deleted the branch
        forced:
          type: boolean
          description: Whether this was a force push
        commits:
          type: array
          description: Array of commits that were pushed
          items:
            type: object
            properties:
              id:
                type: string
                description: The commit SHA
              message:
                type: string
                description: The commit message
              timestamp:
                type: string
                description: When the commit was made
              url:
                type: string
                description: URL to view the commit
              author:
                type: object
                properties:
                  name:
                    type: string
                    description: Author name
                  email:
                    type: string
                    description: Author email
                  username:
                    type: string
                    description: Author GitHub username
              committer:
                type: object
                properties:
                  name:
                    type: string
                    description: Committer name
                  email:
                    type: string
                    description: Committer email
                  username:
                    type: string
                    description: Committer GitHub username
              added:
                type: array
                description: Files added in this commit
                items:
                  type: string
              removed:
                type: array
                description: Files removed in this commit
                items:
                  type: string
              modified:
                type: array
                description: Files modified in this commit
                items:
                  type: string
        head_commit:
          type: object
          properties:
            id:
              type: string
              description: The head commit SHA
            message:
              type: string
              description: The head commit message
            timestamp:
              type: string
              description: When the head commit was made
            url:
              type: string
              description: URL to view the head commit
            author:
              type: object
              properties:
                name:
                  type: string
                  description: Author name
                email:
                  type: string
                  description: Author email
                username:
                  type: string
                  description: Author GitHub username
        compare:
          type: string
          description: URL to compare the changes
        size:
          type: number
          description: Number of commits in the push
    repository:
      type: object
      properties:
        name:
          type: string
          description: The repository name
        full_name:
          type: string
          description: The full repository name (owner/repo)
        html_url:
          type: string
          description: The repository URL
        description:
          type: string
          description: The repository description
        private:
          type: boolean
          description: Whether the repository is private
        default_branch:
          type: string
          description: The default branch of the repository
        owner:
          type: object
          properties:
            login:
              type: string
              description: Repository owner username
            avatar_url:
              type: string
              description: Repository owner avatar URL
            html_url:
              type: string
              description: Repository owner profile URL
    sender:
      type: object
      properties:
        login:
          type: string
          description: The username who pushed the commits
        avatar_url:
          type: string
          description: The avatar URL of the sender
        html_url:
          type: string
          description: The profile URL of the sender
        type:
          type: string
          description: The type of the sender (User, Bot, etc.)

extra:
  python:
    source: triggers/push.py