identity:
  name: issue_assigned
  author: langgenius
  label:
    en_US: Issue Assigned
    zh_Hans: Issue 分配
    ja_JP: Issue 割り当て

description:
  en_US: Triggers when an issue is assigned to a user
  zh_Hans: 当 issue 被分配给用户时触发
  ja_JP: issue がユーザーに割り当てられたときにトリガーがアクティブになります。
parameters:
- name: assigned_to
  label:
    en_US: Assigned To
    zh_Hans: 分配给
    ja_JP: 割り当て先
  type: string
  required: false
  description:
    en_US: "Only trigger if assigned to these specific users (e.g., developer-1, team-member, engineer, comma-separated). Leave empty to trigger for any assignee."
    zh_Hans: "仅当分配给这些特定用户时触发（例如：developer-1, team-member, engineer，逗号分隔）。留空则对任何被分配者触发。"
    ja_JP: "これらの特定のユーザーに割り当てられた場合のみトリガー（例: developer-1, team-member, engineer，カンマ区切り）。空の場合は任意の担当者でトリガー。"

- name: labels
  label:
    en_US: Required Labels
    zh_Hans: 必需标签
    ja_JP: 必須ラベル
  type: string
  required: false
  description:
    en_US: "Only trigger if issue has these labels (e.g., bug, high-priority, ready-for-dev, comma-separated). Leave empty for no label filtering."
    zh_Hans: "仅当议题有这些标签时触发（例如：bug, high-priority, ready-for-dev，逗号分隔）。留空则不过滤标签。"
    ja_JP: "イシューがこれらのラベルを持つ場合のみトリガー（例: bug, high-priority, ready-for-dev，カンマ区切り）。空の場合はラベルフィルタなし。"

- name: assigner
  label:
    en_US: Assigned By
    zh_Hans: 分配者
    ja_JP: 割り当てたユーザー
  type: string
  required: false
  description:
    en_US: "Only trigger if assigned by these users (e.g., project-manager, team-lead, comma-separated). Leave empty to allow any user."
    zh_Hans: "仅当由这些用户分配时触发（例如：project-manager, team-lead，逗号分隔）。留空则允许任何用户。"
    ja_JP: "これらのユーザーによって割り当てられた場合のみトリガー（例: project-manager, team-lead，カンマ区切り）。空の場合は全てのユーザーを許可。"

- name: milestone
  label:
    en_US: Milestone
    zh_Hans: 里程碑
    ja_JP: マイルストーン
  type: string
  required: false
  description:
    en_US: "Only trigger for issues with these milestones (e.g., v1.0, v2.0, Next-Release, comma-separated). Leave empty for all milestones."
    zh_Hans: "仅对具有这些里程碑的议题触发（例如：v1.0, v2.0, Next-Release，逗号分隔）。留空则对所有里程碑触发。"
    ja_JP: "これらのマイルストーンのイシューのみトリガー（例: v1.0, v2.0, Next-Release，カンマ区切り）。空の場合は全てのマイルストーンでトリガー。"

- name: title_pattern
  label:
    en_US: Title Pattern
    zh_Hans: 标题模式
    ja_JP: タイトルパターン
  type: string
  required: false
  description:
    en_US: "Only trigger if title matches this regex pattern (e.g., ^\\[TASK\\].*, .*assigned.*, supports regex). Leave empty for no title filtering."
    zh_Hans: "仅当标题匹配此正则表达式模式时触发（例如：^\\[TASK\\].*, .*assigned.*，支持正则表达式）。留空则不过滤标题。"
    ja_JP: "タイトルがこの正規表現パターンに一致する場合のみトリガー（例: ^\\[TASK\\].*, .*assigned.*，正規表現対応）。空の場合はタイトルフィルタなし。"

output_schema:
  type: object
  properties:
    issue:
      type: object
      description: The issue itself
      required:
      - id
      - node_id
      - number
      - title
      - state
      - created_at
      - updated_at
      - user
      - html_url

    assignee:
      type: object
      description: The user who was assigned to the issue
      required:
      - id
      - login

    repository:
      type: object
      description: The repository where the issue was assigned
      required:
      - id
      - node_id
      - name
      - full_name
      - private
      - owner
      - html_url
      - url
      - created_at
      - updated_at
      - fork
      - default_branch
      - visibility

    sender:
      type: object
      description: The user who triggered the event
      required:
      - id
      - login
      - type

  required:
  - issue
  - assignee
  - repository
  - sender

extra:
  python:
    source: events/issues/issue_assigned.py
