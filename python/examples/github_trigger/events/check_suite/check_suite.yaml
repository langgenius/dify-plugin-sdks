identity:
  name: check_suite
  author: langgenius
  label:
    en_US: Check Suite (Unified)
    zh_Hans: 检查套件（统一）
    ja_JP: チェックスイート（統合）

description:
  en_US: Unified check_suite event with actions filter
  zh_Hans: 带 actions 过滤的统一 check_suite 事件
  ja_JP: アクションフィルタ付きの統合 check_suite イベント

parameters:
- name: actions
  label:
    en_US: Actions
    zh_Hans: 动作
    ja_JP: アクション
  type: select
  required: false
  multiple: true
  default:
  - requested
  - rerequested
  - completed
  options:
  - value: requested
    label:
      en_US: Requested
      zh_Hans: 已请求
      ja_JP: 要求
  - value: rerequested
    label:
      en_US: Rerequested
      zh_Hans: 重新请求
      ja_JP: 再要求
  - value: completed
    label:
      en_US: Completed
      zh_Hans: 已完成
      ja_JP: 完了
  description:
    en_US: Filter which check suite actions to process. Leave empty to accept requested rerequested completed.
    zh_Hans: 选择要处理的 Check Suite 动作。留空接受 requested rerequested completed。
    ja_JP: 対象の Check Suite アクションを選択。未設定で requested rerequested completed を全て許可。

- name: conclusion
  label:
    en_US: Conclusion
    zh_Hans: 结论
    ja_JP: 結論
  type: string
  required: false
  description:
    en_US: Filter by suite conclusion such as success failure cancelled neutral timed_out action_required.
    zh_Hans: 按套件结论过滤 如 success failure cancelled neutral timed_out action_required。
    ja_JP: スイートの結論でフィルタ success failure cancelled neutral timed_out action_required など。

- name: branch
  label:
    en_US: Branch
    zh_Hans: 分支
    ja_JP: ブランチ
  type: string
  required: false
  description:
    en_US: Filter by head branch name. Comma separated values supported.
    zh_Hans: 按 head 分支名过滤。支持逗号分隔多值。
    ja_JP: head ブランチ名でフィルタ。カンマ区切り対応。

- name: app_slug
  label:
    en_US: App Slug
    zh_Hans: 应用 Slug
    ja_JP: アプリスラッグ
  type: string
  required: false
  description:
    en_US: Filter by GitHub App slug that created the suite.
    zh_Hans: 按创建套件的 GitHub App slug 过滤。
    ja_JP: スイートを作成した GitHub App のスラッグでフィルタ。

output_schema:
  type: object
  properties:
    action:
      type: string
    check_suite:
      type: object
      properties:
        id:
          type: integer
        head_branch:
          type: string
        head_sha:
          type: string
        status:
          type: string
        conclusion:
          type: string
        url:
          type: string
          format: uri
        app:
          type: object
          properties:
            id:
              type: integer
            slug:
              type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type:
          - string
          - "null"
          format: date-time
      required:
      - id
      - head_branch
      - head_sha
      - status
    repository:
      type: object
      description: Repository information
      properties:
        id:
          type: integer
          format: int64
        node_id:
          type: string
        name:
          type: string
        full_name:
          type: string
        private:
          type: boolean
        owner:
          type: object
          properties:
            id:
              type: integer
            login:
              type: string
            node_id:
              type: string
            avatar_url:
              type: string
              format: uri
            html_url:
              type: string
              format: uri
            type:
              type: string
              enum:
              - Bot
              - User
              - Organization
            site_admin:
              type: boolean
          required:
          - id
          - login
        html_url:
          type: string
          format: uri
      required:
      - id
      - node_id
      - name
      - full_name
      - private
      - owner
      - html_url
    sender:
      type: object
      description: The user who triggered the event
      properties:
        id:
          type: integer
        login:
          type: string
        node_id:
          type: string
        avatar_url:
          type: string
          format: uri
        html_url:
          type: string
          format: uri
        type:
          type: string
          enum:
          - Bot
          - User
          - Organization
        site_admin:
          type: boolean
      required:
      - id
      - login
      - type

  required:
  - action
  - check_suite
  - repository
  - sender

extra:
  python:
    source: events/check_suite/check_suite.py
