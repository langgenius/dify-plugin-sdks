identity:
  name: merge_group
  author: langgenius
  label:
    en_US: Merge Group (Unified)
    zh_Hans: 合并组（统一）
    ja_JP: マージグループ（統合）

description:
  en_US: Unified merge_group event for merge queue
  zh_Hans: 合并队列的统一 merge_group 事件
  ja_JP: マージキュー向けの統合 merge_group イベント

parameters:
- name: actions
  label:
    en_US: Actions
    zh_Hans: 动作
    ja_JP: アクション
  type: select
  required: false
  multiple: true
  default:
  - checks_requested
  - destroyed
  options:
  - value: checks_requested
    label:
      en_US: Checks Requested
      zh_Hans: 检查已请求
      ja_JP: チェック要求
  - value: destroyed
    label:
      en_US: Destroyed
      zh_Hans: 已销毁
      ja_JP: 破棄
  help:
    en_US: Multi select filter for merge queue group actions such as checks_requested or destroyed.
    zh_Hans: 多选过滤 Merge Queue 组事件 如 checks_requested 或 destroyed。
    ja_JP: マージキューのグループイベントを複数選択で絞り込み。checks_requested や destroyed など。

- name: base_ref
  label:
    en_US: Base Ref
    zh_Hans: 基准分支
    ja_JP: ベースリファレンス
  type: string
  required: false
  help:
    en_US: Filter by base ref names. Comma separated values supported.
    zh_Hans: 按基准分支名过滤。支持逗号分隔多值。
    ja_JP: ベースリファレンス名でフィルタ。カンマ区切りで複数指定。

- name: head_sha
  label:
    en_US: Head SHA
    zh_Hans: Head SHA
    ja_JP: Head SHA
  type: string
  required: false
  help:
    en_US: Filter by head SHA values. Comma separated values supported.
    zh_Hans: 按 Head SHA 过滤。支持逗号分隔多值。
    ja_JP: Head SHA でフィルタ。カンマ区切りで複数指定可。

output_schema:
  type: object
  properties:
    action:
      type: string
    merge_group:
      type: object
      properties:
        id:
          type:
          - integer
          - "null"
        head_sha:
          type:
          - string
          - "null"
        base_sha:
          type:
          - string
          - "null"
        head_ref:
          type:
          - string
          - "null"
        base_ref:
          type:
          - string
          - "null"
        head_repository:
          type:
          - object
          - "null"
        base_repository:
          type:
          - object
          - "null"
      required:
      - head_sha
    repository:
      type: object
      properties:
        id:
          type: integer
          format: int64
        full_name:
          type: string
        html_url:
          type: string
          format: uri
      required:
      - id
      - full_name
      - html_url
    sender:
      type: object
      properties:
        id:
          type: integer
        login:
          type: string
        type:
          type: string
      required:
      - id
      - login
      - type

  required:
  - action
  - repository
  - sender

extra:
  python:
    source: events/merge_group/merge_group.py
