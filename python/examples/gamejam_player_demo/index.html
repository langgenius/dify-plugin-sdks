<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>GameJAM Player Micro Demo</title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      --bg: #0f172a;
      --fg: #f8fafc;
      --accent: #38bdf8;
      --accent-muted: rgba(56, 189, 248, 0.25);
    }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #1e293b, #0f172a);
      color: var(--fg);
    }
    .wrapper {
      width: min(700px, 90vw);
      padding: 2.5rem 2rem 2rem;
      background: rgba(15, 23, 42, 0.92);
      border: 1px solid rgba(248, 250, 252, 0.1);
      border-radius: 18px;
      box-shadow: 0 25px 80px rgba(15, 23, 42, 0.65);
    }
    h1 {
      margin-top: 0;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 1.4rem;
    }
    .tagline {
      margin-top: -0.4rem;
      color: #cbd5f5;
    }
    .hud {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem 1.2rem;
      align-items: center;
      margin-bottom: 1rem;
    }
    .hud button {
      border: none;
      border-radius: 999px;
      padding: 0.4rem 1.4rem;
      font-weight: 600;
      background: var(--accent);
      color: #03101c;
      cursor: pointer;
      box-shadow: 0 8px 20px rgba(56, 189, 248, 0.35);
    }
    .hud button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
    }
    .hud div {
      font-size: 1.1rem;
      font-weight: 600;
    }
    #playfield {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 18px;
      border: 1px solid rgba(248, 250, 252, 0.2);
      background: #020617;
      margin-bottom: 1.5rem;
    }
    .instructions {
      font-size: 0.95rem;
      line-height: 1.5;
      color: #cbd5f5;
    }
    .instructions ul {
      padding-left: 1.2rem;
      margin-top: 0.4rem;
    }
    .status {
      margin-top: 0.5rem;
      font-weight: 600;
      color: var(--accent);
    }
    @media (max-width: 600px) {
      .wrapper {
        padding: 1.8rem 1.4rem;
      }
      h1 {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <main class="wrapper">
    <h1>GameJAM Player Micro Demo</h1>
    <p class="tagline">Collect as many signal orbs as you can before the timer ends.</p>
    <section class="hud">
      <div>Score: <span id="score">0</span></div>
      <div>Time: <span id="time">45.0</span>s</div>
      <button id="start-btn">Start Run</button>
    </section>
    <canvas id="playfield" width="420" height="300" role="img" aria-label="GameJAM Player demo playfield"></canvas>
    <p id="status" class="status">Press Start to begin.</p>
    <section class="instructions">
      <strong>Controls</strong>
      <ul>
        <li>Keyboard: WASD or Arrow Keys</li>
        <li>Touch/Pointer: drag anywhere inside the playfield</li>
      </ul>
      <p>The demo simulates the scaffolding a GameJAM Player session provides: responsive movement, collision scoring, and timeboxing primitives. Adapt this file or drop it into your own jam builds to showcase ideas quickly.</p>
    </section>
  </main>

  <script>
    const canvas = document.getElementById('playfield');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const timeEl = document.getElementById('time');
    const statusEl = document.getElementById('status');
    const startBtn = document.getElementById('start-btn');

    const state = {
      running: false,
      score: 0,
      time: 45,
      lastTimestamp: 0
    };

    const player = {
      x: canvas.width / 2 - 12,
      y: canvas.height / 2 - 12,
      size: 24,
      speed: 220,
      targetX: null,
      targetY: null
    };

    const orb = {
      x: 60,
      y: 60,
      size: 16
    };

    const keys = new Set();

    function clamp(value, min, max) {
      return Math.min(Math.max(value, min), max);
    }

    function randBetween(min, max) {
      return Math.random() * (max - min) + min;
    }

    function resetOrb() {
      orb.x = randBetween(20, canvas.width - 20);
      orb.y = randBetween(20, canvas.height - 20);
    }

    function resetPlayer() {
      player.x = canvas.width / 2 - player.size / 2;
      player.y = canvas.height / 2 - player.size / 2;
      player.targetX = null;
      player.targetY = null;
    }

    function startGame() {
      state.running = true;
      state.score = 0;
      state.time = 45;
      state.lastTimestamp = 0;
      resetPlayer();
      resetOrb();
      startBtn.disabled = true;
      statusEl.textContent = 'Run in progressâ€¦';
    }

    function endGame() {
      state.running = false;
      startBtn.disabled = false;
      statusEl.textContent = `Run complete! Final score: ${state.score}`;
    }

    startBtn.addEventListener('click', () => {
      startGame();
    });

    document.addEventListener('keydown', (event) => {
      const key = event.key.toLowerCase();
      if (['arrowup', 'arrowdown', 'arrowleft', 'arrowright', 'w', 'a', 's', 'd'].includes(key)) {
        keys.add(key);
        event.preventDefault();
      }
    });

    document.addEventListener('keyup', (event) => {
      keys.delete(event.key.toLowerCase());
    });

    canvas.addEventListener('pointerdown', (event) => {
      const rect = canvas.getBoundingClientRect();
      player.targetX = event.clientX - rect.left;
      player.targetY = event.clientY - rect.top;
    });

    canvas.addEventListener('pointermove', (event) => {
      if (player.targetX === null) return;
      const rect = canvas.getBoundingClientRect();
      player.targetX = event.clientX - rect.left;
      player.targetY = event.clientY - rect.top;
    });

    document.addEventListener('pointerup', () => {
      player.targetX = null;
      player.targetY = null;
    });

    function update(delta) {
      const speed = player.speed * delta;
      if (keys.has('arrowup') || keys.has('w')) player.y -= speed;
      if (keys.has('arrowdown') || keys.has('s')) player.y += speed;
      if (keys.has('arrowleft') || keys.has('a')) player.x -= speed;
      if (keys.has('arrowright') || keys.has('d')) player.x += speed;

      if (player.targetX !== null && player.targetY !== null) {
        player.x += (player.targetX - (player.x + player.size / 2)) * 0.1;
        player.y += (player.targetY - (player.y + player.size / 2)) * 0.1;
      }

      player.x = clamp(player.x, 6, canvas.width - player.size - 6);
      player.y = clamp(player.y, 6, canvas.height - player.size - 6);

      const dx = (player.x + player.size / 2) - orb.x;
      const dy = (player.y + player.size / 2) - orb.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      if (distance < (player.size / 2 + orb.size / 2)) {
        state.score += 1;
        scoreEl.textContent = state.score;
        statusEl.textContent = 'Orb collected! Keep going.';
        resetOrb();
      }

      state.time = Math.max(0, state.time - delta);
      timeEl.textContent = state.time.toFixed(1);
      if (state.time === 0) {
        endGame();
      }
    }

    function drawGrid() {
      ctx.save();
      ctx.strokeStyle = 'rgba(56, 189, 248, 0.05)';
      ctx.lineWidth = 1;
      for (let x = 20; x < canvas.width; x += 20) {
        ctx.beginPath();
        ctx.moveTo(x, 0);
        ctx.lineTo(x, canvas.height);
        ctx.stroke();
      }
      for (let y = 20; y < canvas.height; y += 20) {
        ctx.beginPath();
        ctx.moveTo(0, y);
        ctx.lineTo(canvas.width, y);
        ctx.stroke();
      }
      ctx.restore();
    }

    function render() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawGrid();
      ctx.fillStyle = 'rgba(56, 189, 248, 0.1)';
      ctx.fillRect(4, 4, canvas.width - 8, canvas.height - 8);

      // Orb
      ctx.fillStyle = '#38bdf8';
      ctx.shadowColor = '#38bdf8';
      ctx.shadowBlur = 15;
      ctx.beginPath();
      ctx.arc(orb.x, orb.y, orb.size / 2, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowBlur = 0;

      // Player
      ctx.fillStyle = '#fef3c7';
      ctx.fillRect(player.x, player.y, player.size, player.size);

      if (!state.running) {
        ctx.fillStyle = 'rgba(2, 6, 23, 0.65)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#e2e8f0';
        ctx.textAlign = 'center';
        ctx.font = '600 20px Inter, system-ui';
        ctx.fillText('Press Start to begin', canvas.width / 2, canvas.height / 2);
      }
    }

    function loop(timestamp) {
      requestAnimationFrame(loop);
      if (!state.lastTimestamp) {
        state.lastTimestamp = timestamp;
      }
      const delta = Math.min(0.05, (timestamp - state.lastTimestamp) / 1000);
      state.lastTimestamp = timestamp;
      if (state.running) {
        update(delta);
      }
      render();
    }

    resetOrb();
    render();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
